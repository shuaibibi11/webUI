# 前后端系统端口配置对照表

## 服务端口配置

### 后端API服务
| 服务名称 | 端口号 | 上下文路径 | 描述 |
|---------|--------|------------|------|
| admin-api | 11025 | /api | 管理端后端API服务 |
| user-api | 11031 | /api | 用户端后端API服务 |

### 前端网页服务
| 服务名称 | 端口号 | 代理配置 | 描述 |
|---------|--------|----------|------|
| admin-web | 13085 | 代理到admin-api(11025)和user-api(11031) | 管理端网页服务 |
| user-web | 13089 | 代理到user-api(11031) | 用户端网页服务 |

## 代理配置详情

### admin-web代理配置 (vite.config.ts)
```javascript
server: {
  proxy: {
    '/api/admin': {
      target: 'http://localhost:11025',
      changeOrigin: true,
      rewrite: (path) => path.replace(/^\/api\/admin/, '/api')
    },
    '/api/users': {
      target: 'http://localhost:11031',
      changeOrigin: true
    },
    '/api': {
      target: 'http://localhost:11031',
      changeOrigin: true
    }
  }
}
```

### user-web代理配置 (vite.config.ts)
```javascript
server: {
  proxy: {
    '/api': {
      target: 'http://localhost:11031',
      changeOrigin: true
    }
  }
}
```

## 接口访问路径

### 用户相关接口
| 接口功能 | 访问路径 | 描述 |
|---------|----------|------|
| 用户注册 | `/api/users/register` | POST，需要完整用户信息 |
| 用户登录 | `/api/users/login` | POST，支持用户名/邮箱/手机号登录 |
| 获取用户信息 | `/api/users/info` | GET，需要认证token |
| 密码重置请求 | `/api/users/password-reset/request` | POST |
| 密码重置确认 | `/api/users/password-reset/confirm` | POST |

### 管理相关接口
| 接口功能 | 访问路径 | 描述 |
|---------|----------|------|
| 管理功能 | `/api/admin/...` | 通过admin-web代理到admin-api |

## 测试验证结果

### 用户端网页 (http://localhost:13081)
- ✅ 用户注册功能正常 (HTTP 201)
- ✅ 用户登录功能正常 (HTTP 200)
- ✅ 代理配置正确，所有请求转发到user-api(11031)

### 管理端网页 (http://localhost:13085)
- ✅ 用户注册功能正常 (HTTP 201)
- ✅ 用户登录功能正常 (HTTP 200)
- ✅ 代理配置正确，/api/users转发到user-api(11031)，/api/admin转发到admin-api(11025)

## 注册接口必填字段
注册接口需要以下完整字段：
- `username` (用户名，2-50字符)
- `password` (密码，8-128字符)
- `email` (邮箱，必须包含@)
- `phone` (手机号，6-20位)
- `realName` (真实姓名)
- `idCard` (身份证号，格式验证)

## 系统运行状态
所有服务当前正常运行：
- admin-api: 11025端口 ✅
- user-api: 11031端口 ✅
- admin-web: 13085端口 ✅
- user-web: 13089端口 ✅

## 注意事项
1. 注册接口返回403错误通常是因为缺少必填字段
2. 登录接口支持用户名、邮箱、手机号三种方式登录
3. 所有接口都配置了CORS支持，允许前端跨域访问
4. 系统使用JWT token进行身份认证