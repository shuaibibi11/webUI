
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.1)

2025-12-02T14:55:25.587+08:00  INFO 1296214 --- [           main] c.e.webui.userapi.WebUiUserApplication   : Starting WebUiUserApplication using Java 17.0.17 with PID 1296214 (/data/webUI-java/user-api/target/user-api-1.0.0.jar started by tvi in /data/webUI-java)
2025-12-02T14:55:25.589+08:00 DEBUG 1296214 --- [           main] c.e.webui.userapi.WebUiUserApplication   : Running with Spring Boot v3.2.1, Spring v6.1.2
2025-12-02T14:55:25.590+08:00  INFO 1296214 --- [           main] c.e.webui.userapi.WebUiUserApplication   : No active profile set, falling back to 1 default profile: "default"
2025-12-02T14:55:26.375+08:00  INFO 1296214 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-02T14:55:26.551+08:00  INFO 1296214 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 167 ms. Found 8 JPA repository interfaces.
2025-12-02T14:55:27.363+08:00 ERROR 1296214 --- [           main] o.a.catalina.core.AprLifecycleListener   : An incompatible version [1.2.31] of the Apache Tomcat Native library is installed, while Tomcat requires version [1.2.34]
2025-12-02T14:55:27.638+08:00  INFO 1296214 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 11031 (http)
2025-12-02T14:55:27.652+08:00  INFO 1296214 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-02T14:55:27.653+08:00  INFO 1296214 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.17]
2025-12-02T14:55:27.713+08:00  INFO 1296214 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring embedded WebApplicationContext
2025-12-02T14:55:27.716+08:00  INFO 1296214 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2066 ms
2025-12-02T14:55:27.810+08:00 DEBUG 1296214 --- [           main] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use
2025-12-02T14:55:27.994+08:00  INFO 1296214 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-02T14:55:28.055+08:00  INFO 1296214 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.1.Final
2025-12-02T14:55:28.099+08:00  INFO 1296214 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-02T14:55:28.346+08:00  INFO 1296214 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-02T14:55:28.374+08:00  INFO 1296214 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-02T14:55:28.560+08:00  INFO 1296214 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@66b6873f
2025-12-02T14:55:28.563+08:00  INFO 1296214 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-02T14:55:29.827+08:00  INFO 1296214 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-02T14:55:29.830+08:00  INFO 1296214 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-02T14:55:29.903+08:00  INFO 1296214 --- [           main] c.c.socketio.SocketIOServer              : Session store / pubsub factory used: MemoryStoreFactory (local session store only)
2025-12-02T14:55:30.033+08:00  INFO 1296214 --- [ntLoopGroup-2-1] c.c.socketio.SocketIOServer              : SocketIO server started at port: 11032
2025-12-02T14:55:30.661+08:00  WARN 1296214 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-02T14:55:30.695+08:00  WARN 1296214 --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 394f8323-af0c-42e0-9124-03499492f31b

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-12-02T14:55:30.790+08:00  INFO 1296214 --- [           main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
2025-12-02T14:55:30.875+08:00 DEBUG 1296214 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 25 mappings in 'requestMappingHandlerMapping'
2025-12-02T14:55:30.972+08:00 DEBUG 1296214 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-02T14:55:30.985+08:00  INFO 1296214 --- [           main] c.e.w.u.config.SecurityConfig$JwtFilter  : JWT Filter initialized with secret: your-secret-key-change-in-production
2025-12-02T14:55:31.007+08:00  INFO 1296214 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4d37c996, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@85eabca, org.springframework.security.web.context.SecurityContextHolderFilter@cfb462, org.springframework.security.web.header.HeaderWriterFilter@372c428, org.springframework.web.filter.CorsFilter@729c8063, org.springframework.security.web.authentication.logout.LogoutFilter@9214725, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@54d6f172, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6d21a69f, org.springframework.security.web.session.SessionManagementFilter@9abbe39, org.springframework.security.web.access.ExceptionTranslationFilter@74997ca6, com.example.webui.userapi.config.SecurityConfig$JwtFilter@3f8c4bcf, org.springframework.security.web.access.intercept.AuthorizationFilter@4cd13fad]
2025-12-02T14:55:31.148+08:00 DEBUG 1296214 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-02T14:55:31.183+08:00 DEBUG 1296214 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-02T14:55:31.353+08:00  INFO 1296214 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 11031 (http) with context path '/api'
2025-12-02T14:55:31.369+08:00  INFO 1296214 --- [           main] c.e.webui.userapi.WebUiUserApplication   : Started WebUiUserApplication in 6.267 seconds (process running for 6.829)
2025-12-02T14:55:31.504+08:00 DEBUG 1296214 --- [           main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.email,
        u1_0.id_card,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.password,
        u1_0.phone,
        u1_0.real_name,
        u1_0.role,
        u1_0.status,
        u1_0.tokens_used,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-02T14:55:51.598+08:00  INFO 1296214 --- [io-11031-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-02T14:55:51.599+08:00  INFO 1296214 --- [io-11031-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-02T14:55:51.599+08:00 DEBUG 1296214 --- [io-11031-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-12-02T14:55:51.599+08:00 DEBUG 1296214 --- [io-11031-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-12-02T14:55:51.599+08:00 DEBUG 1296214 --- [io-11031-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-12-02T14:55:51.600+08:00 DEBUG 1296214 --- [io-11031-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5eb4b746
2025-12-02T14:55:51.601+08:00 DEBUG 1296214 --- [io-11031-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@734eada1
2025-12-02T14:55:51.601+08:00 DEBUG 1296214 --- [io-11031-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-02T14:55:51.601+08:00  INFO 1296214 --- [io-11031-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-12-02T14:55:51.619+08:00 DEBUG 1296214 --- [io-11031-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /users/login
2025-12-02T14:55:51.640+08:00  INFO 1296214 --- [io-11031-exec-1] c.e.w.u.config.SecurityConfig$JwtFilter  : Processing request: POST /api/users/login
2025-12-02T14:55:51.641+08:00  WARN 1296214 --- [io-11031-exec-1] c.e.w.u.config.SecurityConfig$JwtFilter  : No token found in request
2025-12-02T14:55:51.642+08:00  INFO 1296214 --- [io-11031-exec-1] c.e.w.u.config.SecurityConfig$JwtFilter  : Authentication before filter chain: null
2025-12-02T14:55:51.644+08:00 DEBUG 1296214 --- [io-11031-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /users/login
2025-12-02T14:55:51.646+08:00 DEBUG 1296214 --- [io-11031-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-12-02T14:55:51.650+08:00 DEBUG 1296214 --- [io-11031-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.example.webui.userapi.controller.UserController#login(Map, HttpServletRequest, HttpServletResponse)
2025-12-02T14:55:51.707+08:00 DEBUG 1296214 --- [io-11031-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{username=admin, password=Abcdef1!}]
2025-12-02T14:55:51.718+08:00 DEBUG 1296214 --- [io-11031-exec-1] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.email,
        u1_0.id_card,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.password,
        u1_0.phone,
        u1_0.real_name,
        u1_0.role,
        u1_0.status,
        u1_0.tokens_used,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-02T14:55:52.170+08:00 DEBUG 1296214 --- [io-11031-exec-1] org.hibernate.SQL                        : 
    insert 
    into
        audit_logs
        (action, created_at, details, ip, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?)
2025-12-02T14:55:52.188+08:00 DEBUG 1296214 --- [io-11031-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-02T14:55:52.189+08:00 DEBUG 1296214 --- [io-11031-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, message=登录成功, user={realName=管理员, role=ADMIN, phone=13800138000, id=fcc536c3-4a15-46c8-8d (truncated)...]
2025-12-02T14:55:52.201+08:00 DEBUG 1296214 --- [io-11031-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-12-02T14:55:52.202+08:00  INFO 1296214 --- [io-11031-exec-1] c.e.w.u.config.SecurityConfig$JwtFilter  : Authentication after filter chain: null
2025-12-02T14:55:58.621+08:00 DEBUG 1296214 --- [io-11031-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /conversations
2025-12-02T14:55:58.622+08:00  INFO 1296214 --- [io-11031-exec-2] c.e.w.u.config.SecurityConfig$JwtFilter  : Processing request: GET /api/conversations
2025-12-02T14:55:58.622+08:00  INFO 1296214 --- [io-11031-exec-2] c.e.w.u.config.SecurityConfig$JwtFilter  : Found Bearer token in Authorization header
2025-12-02T14:55:58.622+08:00  INFO 1296214 --- [io-11031-exec-2] c.e.w.u.config.SecurityConfig$JwtFilter  : Attempting to parse JWT token
2025-12-02T14:55:58.643+08:00  INFO 1296214 --- [io-11031-exec-2] c.e.w.u.config.SecurityConfig$JwtFilter  : JWT parsed successfully. UserId: fcc536c3-4a15-46c8-8d67-f10f66f09c9f, Username: admin, Role: ADMIN
2025-12-02T14:55:58.644+08:00  INFO 1296214 --- [io-11031-exec-2] c.e.w.u.config.SecurityConfig$JwtFilter  : Authentication set in SecurityContext with authorities: [ROLE_USER, ROLE_ADMIN]
2025-12-02T14:55:58.644+08:00  INFO 1296214 --- [io-11031-exec-2] c.e.w.u.config.SecurityConfig$JwtFilter  : Current authentication after setting: admin
2025-12-02T14:55:58.644+08:00  INFO 1296214 --- [io-11031-exec-2] c.e.w.u.config.SecurityConfig$JwtFilter  : Authentication details: {role=ADMIN, userId=fcc536c3-4a15-46c8-8d67-f10f66f09c9f, username=admin}
2025-12-02T14:55:58.644+08:00  INFO 1296214 --- [io-11031-exec-2] c.e.w.u.config.SecurityConfig$JwtFilter  : Authentication before filter chain: admin
2025-12-02T14:55:58.645+08:00 DEBUG 1296214 --- [io-11031-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /conversations
2025-12-02T14:55:58.646+08:00 DEBUG 1296214 --- [io-11031-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/conversations", parameters={}
2025-12-02T14:55:58.646+08:00 DEBUG 1296214 --- [io-11031-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.example.webui.userapi.controller.ConversationController#list(Authentication, int, int)
DEBUG: Authentication details: {role=ADMIN, userId=fcc536c3-4a15-46c8-8d67-f10f66f09c9f, username=admin}
DEBUG: Authentication principal: admin
DEBUG: Authentication authorities: [ROLE_USER, ROLE_ADMIN]
DEBUG: Extracted userId: fcc536c3-4a15-46c8-8d67-f10f66f09c9f
2025-12-02T14:55:58.662+08:00 DEBUG 1296214 --- [io-11031-exec-2] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.email,
        u1_0.id_card,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.password,
        u1_0.phone,
        u1_0.real_name,
        u1_0.role,
        u1_0.status,
        u1_0.tokens_used,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
DEBUG: Found user: admin
2025-12-02T14:55:58.676+08:00 DEBUG 1296214 --- [io-11031-exec-2] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.is_deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        conversations c1_0 
    where
        c1_0.user_id=? 
    limit
        ?, ?
2025-12-02T14:55:58.682+08:00 DEBUG 1296214 --- [io-11031-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-02T14:55:58.682+08:00 DEBUG 1296214 --- [io-11031-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={conversations=[], pagination={page=1, totalPages=0, limit=20, total=0}}}]
2025-12-02T14:55:58.685+08:00 DEBUG 1296214 --- [io-11031-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-12-02T14:55:58.685+08:00  INFO 1296214 --- [io-11031-exec-2] c.e.w.u.config.SecurityConfig$JwtFilter  : Authentication after filter chain: admin
2025-12-02T14:56:08.330+08:00 DEBUG 1296214 --- [io-11031-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /conversations
2025-12-02T14:56:08.331+08:00  INFO 1296214 --- [io-11031-exec-4] c.e.w.u.config.SecurityConfig$JwtFilter  : Processing request: POST /api/conversations
2025-12-02T14:56:08.331+08:00  INFO 1296214 --- [io-11031-exec-4] c.e.w.u.config.SecurityConfig$JwtFilter  : Found Bearer token in Authorization header
2025-12-02T14:56:08.331+08:00  INFO 1296214 --- [io-11031-exec-4] c.e.w.u.config.SecurityConfig$JwtFilter  : Attempting to parse JWT token
2025-12-02T14:56:08.335+08:00  INFO 1296214 --- [io-11031-exec-4] c.e.w.u.config.SecurityConfig$JwtFilter  : JWT parsed successfully. UserId: fcc536c3-4a15-46c8-8d67-f10f66f09c9f, Username: admin, Role: ADMIN
2025-12-02T14:56:08.335+08:00  INFO 1296214 --- [io-11031-exec-4] c.e.w.u.config.SecurityConfig$JwtFilter  : Authentication set in SecurityContext with authorities: [ROLE_USER, ROLE_ADMIN]
2025-12-02T14:56:08.335+08:00  INFO 1296214 --- [io-11031-exec-4] c.e.w.u.config.SecurityConfig$JwtFilter  : Current authentication after setting: admin
2025-12-02T14:56:08.335+08:00  INFO 1296214 --- [io-11031-exec-4] c.e.w.u.config.SecurityConfig$JwtFilter  : Authentication details: {role=ADMIN, userId=fcc536c3-4a15-46c8-8d67-f10f66f09c9f, username=admin}
2025-12-02T14:56:08.335+08:00  INFO 1296214 --- [io-11031-exec-4] c.e.w.u.config.SecurityConfig$JwtFilter  : Authentication before filter chain: admin
2025-12-02T14:56:08.335+08:00 DEBUG 1296214 --- [io-11031-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /conversations
2025-12-02T14:56:08.336+08:00 DEBUG 1296214 --- [io-11031-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/conversations", parameters={}
2025-12-02T14:56:08.336+08:00 DEBUG 1296214 --- [io-11031-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.example.webui.userapi.controller.ConversationController#create(Authentication, Map)
2025-12-02T14:56:08.338+08:00 DEBUG 1296214 --- [io-11031-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{title=测试会话}]
2025-12-02T14:56:08.340+08:00 DEBUG 1296214 --- [io-11031-exec-4] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.email,
        u1_0.id_card,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.password,
        u1_0.phone,
        u1_0.real_name,
        u1_0.role,
        u1_0.status,
        u1_0.tokens_used,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-12-02T14:56:08.347+08:00 DEBUG 1296214 --- [io-11031-exec-4] org.hibernate.SQL                        : 
    insert 
    into
        conversations
        (created_at, is_deleted, title, updated_at, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?)
2025-12-02T14:56:08.355+08:00 DEBUG 1296214 --- [io-11031-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-02T14:56:08.356+08:00 DEBUG 1296214 --- [io-11031-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=201, conversation={createdAt=2025-12-02T06:56:08.343758002Z, unreadCount=0, id=f61f8097-4d72-4 (truncated)...]
2025-12-02T14:56:08.357+08:00 DEBUG 1296214 --- [io-11031-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-12-02T14:56:08.357+08:00  INFO 1296214 --- [io-11031-exec-4] c.e.w.u.config.SecurityConfig$JwtFilter  : Authentication after filter chain: admin
2025-12-02T14:56:14.196+08:00 DEBUG 1296214 --- [io-11031-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /conversations
2025-12-02T14:56:14.197+08:00  INFO 1296214 --- [io-11031-exec-6] c.e.w.u.config.SecurityConfig$JwtFilter  : Processing request: GET /api/conversations
2025-12-02T14:56:14.197+08:00  INFO 1296214 --- [io-11031-exec-6] c.e.w.u.config.SecurityConfig$JwtFilter  : Found Bearer token in Authorization header
2025-12-02T14:56:14.197+08:00  INFO 1296214 --- [io-11031-exec-6] c.e.w.u.config.SecurityConfig$JwtFilter  : Attempting to parse JWT token
2025-12-02T14:56:14.201+08:00  INFO 1296214 --- [io-11031-exec-6] c.e.w.u.config.SecurityConfig$JwtFilter  : JWT parsed successfully. UserId: fcc536c3-4a15-46c8-8d67-f10f66f09c9f, Username: admin, Role: ADMIN
2025-12-02T14:56:14.201+08:00  INFO 1296214 --- [io-11031-exec-6] c.e.w.u.config.SecurityConfig$JwtFilter  : Authentication set in SecurityContext with authorities: [ROLE_USER, ROLE_ADMIN]
2025-12-02T14:56:14.201+08:00  INFO 1296214 --- [io-11031-exec-6] c.e.w.u.config.SecurityConfig$JwtFilter  : Current authentication after setting: admin
2025-12-02T14:56:14.201+08:00  INFO 1296214 --- [io-11031-exec-6] c.e.w.u.config.SecurityConfig$JwtFilter  : Authentication details: {role=ADMIN, userId=fcc536c3-4a15-46c8-8d67-f10f66f09c9f, username=admin}
2025-12-02T14:56:14.201+08:00  INFO 1296214 --- [io-11031-exec-6] c.e.w.u.config.SecurityConfig$JwtFilter  : Authentication before filter chain: admin
2025-12-02T14:56:14.202+08:00 DEBUG 1296214 --- [io-11031-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /conversations
2025-12-02T14:56:14.202+08:00 DEBUG 1296214 --- [io-11031-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/conversations", parameters={}
2025-12-02T14:56:14.202+08:00 DEBUG 1296214 --- [io-11031-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.example.webui.userapi.controller.ConversationController#list(Authentication, int, int)
DEBUG: Authentication details: {role=ADMIN, userId=fcc536c3-4a15-46c8-8d67-f10f66f09c9f, username=admin}
DEBUG: Authentication principal: admin
DEBUG: Authentication authorities: [ROLE_USER, ROLE_ADMIN]
DEBUG: Extracted userId: fcc536c3-4a15-46c8-8d67-f10f66f09c9f
2025-12-02T14:56:14.205+08:00 DEBUG 1296214 --- [io-11031-exec-6] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.email,
        u1_0.id_card,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.password,
        u1_0.phone,
        u1_0.real_name,
        u1_0.role,
        u1_0.status,
        u1_0.tokens_used,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
DEBUG: Found user: admin
2025-12-02T14:56:14.210+08:00 DEBUG 1296214 --- [io-11031-exec-6] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.is_deleted,
        c1_0.title,
        c1_0.updated_at,
        c1_0.user_id 
    from
        conversations c1_0 
    where
        c1_0.user_id=? 
    limit
        ?, ?
2025-12-02T14:56:14.217+08:00 DEBUG 1296214 --- [io-11031-exec-6] org.hibernate.SQL                        : 
    select
        m1_0.conversation_id,
        m1_0.id,
        m1_0.completion_tokens,
        m1_0.content,
        m1_0.created_at,
        m1_0.feedback_status,
        m1_0.prompt_tokens,
        m1_0.role,
        m1_0.status,
        m1_0.total_tokens 
    from
        messages m1_0 
    where
        m1_0.conversation_id=?
2025-12-02T14:56:14.219+08:00 DEBUG 1296214 --- [io-11031-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-02T14:56:14.219+08:00 DEBUG 1296214 --- [io-11031-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={conversations=[{createdAt=2025-12-02T06:56:08.343758Z, unreadCount=0, id=f61f8097-4 (truncated)...]
2025-12-02T14:56:14.220+08:00 DEBUG 1296214 --- [io-11031-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-12-02T14:56:14.221+08:00  INFO 1296214 --- [io-11031-exec-6] c.e.w.u.config.SecurityConfig$JwtFilter  : Authentication after filter chain: admin
