# 前后端系统全面修复计划

## 1. 前端naive-ui message导入错误修复

### 问题分析
在`/data/webUI-java/user-web/src/utils/api.ts`文件中，第1行使用了`import { message } from 'naive-ui'`，但是naive-ui的message组件不是通过命名导出的，而是通过`useMessage()`组合式API或者`n-message`组件使用的。这就是为什么会出现"SyntaxError: The requested module '/node_modules/.vite/deps/naive-ui.js?v=f4be73f5' does not provide an export named 'message'"错误。

### 解决方案
- 修改`api.ts`文件，移除直接从naive-ui导入message的代码
- 使用console.error代替message.error，或者实现正确的naive-ui message使用方式

## 2. 后端测试问题修复

### 问题分析
后端测试失败，主要是依赖注入问题和setStatus方法问题。

### 解决方案
- 检查测试类中@ExtendWith(MockitoExtension.class)注解的使用情况，确保所有mock对象均已正确初始化并注入
- 验证测试环境中User类版本与实际代码的一致性，并确保测试类中的User对象已正确初始化
- 考虑使用Spring Boot Test的@SpringBootTest注解替代Mockito单独测试

## 3. 前后端交互验证

### 问题分析
需要确保前后端能够稳定联通并协同工作。

### 解决方案
- 检查前端API请求配置，确保使用正确的端口和URL
- 验证后端服务是否正常运行
- 测试前后端数据传输的完整性和准确性

## 4. 修复步骤

### 步骤1：修复前端naive-ui message导入错误
- 修改`/data/webUI-java/user-web/src/utils/api.ts`文件，移除直接从naive-ui导入message的代码
- 实现正确的错误提示方式

### 步骤2：修复后端测试问题
- 修改`UserControllerTest`类，确保所有mock对象正确初始化
- 修改`UserControllerIntegrationTest`类，确保所有依赖正确注入
- 运行后端测试，验证修复效果

### 步骤3：验证前后端交互
- 启动后端服务
- 启动前端服务
- 测试前后端数据传输

### 步骤4：验证系统功能
- 测试用户注册、登录功能
- 测试聊天功能
- 测试反馈功能

## 5. 预期结果

- 前端服务能够正常启动，不再出现naive-ui message导入错误
- 后端测试能够成功运行
- 前后端能够稳定联通并协同工作
- 系统功能能够正常使用

## 6. 风险评估

- **前端依赖问题**：可能需要调整naive-ui的使用方式
- **后端测试问题**：可能需要重新设计测试用例
- **前后端交互问题**：可能需要调整端口配置

## 7. 交付物

- 修复后的前端代码
- 修复后的后端测试代码
- 可正常运行的前后端服务
- 功能验证报告
