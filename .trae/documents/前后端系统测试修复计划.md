# 前后端系统测试修复计划

## 1. 修复npm install错误

### 问题分析
npm install命令执行失败，错误信息为"ENOENT: no such file or directory, open '/data/webUI-java/package.json'"。这是因为package.json文件不在根目录，而是分别位于admin-web和user-web目录下。

### 解决方案
- 在admin-web和user-web目录下分别执行npm install命令
- 确保所有依赖都正确安装

## 2. 修复后端测试问题

### 2.1 依赖注入问题

#### 问题分析
测试类中使用了@ExtendWith(MockitoExtension.class)注解，但mock对象没有被正确初始化和注入。

#### 解决方案
- 检查UserControllerTest类，确保所有mock对象都使用@Mock注解
- 确保测试类使用@InjectMocks注解注入被测试对象
- 检查测试类的setUp方法，确保正确初始化所有依赖

### 2.2 setStatus方法问题

#### 问题分析
测试环境中User类版本与实际代码不一致，或者测试类中的User对象没有正确初始化。

#### 解决方案
- 检查User类的setStatus方法是否正确定义
- 确保测试类中的User对象正确初始化
- 检查测试环境的类路径，确保使用正确版本的User类

## 3. 修复Vue页面端口配置

### 问题分析
需要确保所有Vue页面都正确定向到13080端口的前端页面。

### 解决方案
- 检查user-web和admin-web的vite.config.ts文件，确保端口配置正确
- 检查所有Vue组件，确保API请求使用正确的端口
- 检查nginx配置，确保反向代理配置正确

## 4. 修复步骤

### 步骤1：解决npm install错误
- 在admin-web目录下执行npm install
- 在user-web目录下执行npm install

### 步骤2：修复后端测试问题
- 修改UserControllerTest类，确保所有mock对象正确初始化
- 修改UserControllerIntegrationTest类，修复正则表达式转义问题
- 运行后端测试，验证修复效果

### 步骤3：修复Vue页面端口配置
- 检查vite.config.ts文件
- 检查API请求配置
- 检查nginx配置

### 步骤4：验证修复效果
- 运行前端测试，验证前端功能
- 运行后端测试，验证后端功能
- 运行API接口测试，验证API功能
- 验证服务可以正常启动和访问

## 5. 预期结果

- 所有测试用例可以成功运行
- 前端页面可以正常访问
- 后端服务可以正常运行
- API接口可以正常调用
- 所有依赖都正确安装

## 6. 风险评估

- **npm install时间较长**：可能需要较长时间完成依赖安装
- **测试环境配置复杂**：可能需要多次调整测试配置
- **端口冲突**：可能需要调整端口配置，避免冲突

## 7. 交付物

- 修复后的测试类
- 修复后的配置文件
- 成功运行的测试报告
- 可正常访问的前后端服务
