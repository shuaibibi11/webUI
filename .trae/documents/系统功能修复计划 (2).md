# 系统功能修复计划

## 问题分析

1. **管理账号登录后台失败**：报错"权限验证失败，请重新登录"
2. **对话页面错误**："获取消息列表失败 Error: Not Found"
3. **Bisheng工作流问题**：工作流未返回有效内容，页面对话输入内容测试返回此提示

## 修复步骤

### 1. 重启前后端服务

* 停止所有运行中的服务
* 重新启动后端服务（admin-api、user-api）
* 重新启动前端服务（admin-web、user-web）
* 确保所有服务正常运行

### 2. 修复管理端登录问题

* 检查管理端API的认证逻辑
* 确保登录请求能正确到达后端服务
* 检查JWT令牌生成和验证机制
* 测试管理端登录功能

### 3. 修复对话页面"获取消息列表失败"问题

* 检查对话页面的API调用路径
* 修复消息列表API的调用问题
* 确保SSE连接能正确建立
* 测试对话功能，确保能正常发送和接收消息

### 4. 修复Bisheng工作流调用问题

* 检查user-api中的Bisheng工作流配置
* 修复工作流调用代码，确保能正确处理工作流返回的事件流
* 参考tvi-millions-engine-portal-web-test项目的实现
* 确保能正确解析工作流返回的事件数据
* 测试Bisheng工作流调用，确保能返回有效内容

### 5. 配置大模型API

* 更新大模型配置信息：
  - 地址：http://43.192.114.202:8000/v1/chat/completions
  - key: 123
  - 模型名称：Qwen3-4B-Instruct-2507-FP8
* 确保大模型API能正常调用

### 6. 测试修复效果

* 测试管理端登录功能
* 测试对话功能，确保能正常发送和接收消息
* 测试Bisheng工作流调用，确保能返回有效内容
* 验证所有功能模块正常工作

## 预期结果

1. 管理账号能够正常登录后台
2. 对话页面能够正常获取消息列表，发送和接收消息
3. Bisheng工作流能够正常调用，返回有效内容
4. 系统稳定运行，没有报错

## 修复重点

* 明确区分大模型API和Bisheng工作流调用
* 确保工作流调用能正确处理事件流数据
* 修复页面端的API调用问题
* 确保前后端服务正常通信